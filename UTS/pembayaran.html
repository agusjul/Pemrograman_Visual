<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./pembayaran.css">
    <title>Rentaku - Kini Sewa Jadi Lebih Mudah</title>
</head>
<body>
    <h1>Pembayaran</h1>

    <form id="form">
        <div class="bayar">
            
            <div id="mobilinfo">
                <h4>Total Bayar : <span id="hargamobil">Rp.200,000</span></h4>
                <img id="gambarmobil" src="" alt="">
            </div>
            <label for="norek">Pilih Bank :</label> <br>
            <select id="bank" name="bank">
                <option value="BNI">BNI</option>
                <option value="BRI">BRI</option>
                <option value="Mandiri">Mandiri</option>
                <option value="BCA">BCA</option>
            </select><br><br>
            <label for="number">No.Rekening :</label> <br>
            <input type="number" id="norek" name="norek"> <br><br>
            <input type="submit" id="submit" name="tombol" value="Bayar" onclick="bayarsekarang()">
        </div>
    </form>

    <script>
        const electron = require("electron");
        const {ipcRenderer} = electron;
        ipcRenderer.send("mobil:request:list");

        ipcRenderer.on('mobil:response:list', (event, arg) => {
        let mobilDiv = document.getElementById("mobilinfo");
        
        const infoDiv = document.createElement("Div");
        infoDiv.setAttribute("id","mo");

        let HargaDiv= document.getElementById("hargamobil");
        HargaDiv.innerHTML = `${arg.harga}`;
        //Memasukan gambar
        let z = document.getElementById("gambarmobil");
        z.setAttribute("src", `${arg.gambar}`);

        infoDiv.appendChild(HargaDiv);
        infoDiv.appendChild(z);

        mobilDiv.append(infoDiv);
        });

        function bayarsekarang(){
                const electron = require("electron");
                const { ipcRenderer, dialog } = electron;

                const form = document.getElementById("form");
                const elements = {};
            
                form.addEventListener("submit", event => {
                    event.preventDefault();

                    for (let i = 0; i < form.elements.length; i++){
                        if (form.elements[i].type !== "submit")
                        elements[form.elements[i].name] = form.elements[i].value;
                    }

                    ipcRenderer.send("pembayaran", elements);
                }); 

            }


        
       
    </script>
</body>
</html>